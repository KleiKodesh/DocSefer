<UserControl x:Class="DocSefer.DocSeferView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:helpers="clr-namespace:WpfLib.Helpers;assembly=WpfLib"
             xmlns:ap="clr-namespace:WpfLib.AttachedProperties;assembly=WpfLib"
             xmlns:controls="clr-namespace:WpfLib.Controls;assembly=WpfLib"
             xmlns:conv="clr-namespace:WpfLib.Converters;assembly=WpfLib"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:DocSefer"
             xmlns:p="clr-namespace:DocSefer.Paragraphs"
             mc:Ignorable="d" 
             Background="{Binding Path=(helpers:ThemeHelper.Background)}"
             Foreground="{Binding Path=(helpers:ThemeHelper.Foreground)}"
             FlowDirection="RightToLeft"
             FontFamily="Tahoma"
             FontSize="13"
             d:DesignHeight="450" d:DesignWidth="350">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/WpfLib;component/Dictionaries/BaseDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <conv:ReverseBoolConverter x:Key="ReverseBoolConverter"/>
            <Style TargetType="Button" BasedOn="{StaticResource FlatButton}">
                <Setter Property="Margin" Value="5"/>
            </Style>
            <Style TargetType="ToggleButton" BasedOn="{StaticResource FlatToggleButton}">
                <Setter Property="BorderThickness" Value="0.5"/>
                <Setter Property="Margin" Value="5"/>
            </Style>
            <Style TargetType="RepeatButton">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0.5"/>
            </Style>
            <Style TargetType="Path">
                <Setter Property="FlowDirection" Value="LeftToRight"/>
                <!--<Setter Property="Fill" Value="{Binding Path=(helpers:ThemeHelper.Foreground)}"/>-->
                <Setter Property="Fill" Value="White"/>
                <Setter Property="Height" Value="26"/>
                <Setter Property="Width" Value="26"/>
                <Setter Property="Stretch" Value="Fill"/>
                <Setter Property="Margin" Value="5"/>
            </Style>
            <Style x:Key="DeleteIconStyle" TargetType="Path">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="HorizontalAlignment" Value="Right"/>
                <Setter Property="VerticalAlignment" Value="Bottom"/>
                <Setter Property="Stretch" Value="Fill"/>
                <Setter Property="Height" Value="9"/>
                <Setter Property="Width" Value="9"/>
                <Setter Property="Fill" Value="Red"/>
                <Setter Property="Data" Value="M10 12.6l.7.7 1.6-1.6 1.6 1.6.8-.7L13 11l1.7-1.6-.8-.8-1.6 1.7-1.6-1.7-.7.8 1.6 1.6-1.6 1.6z"/>
            </Style>
            <Style TargetType="ScrollBar">
                <Setter Property="Opacity" Value="0.3"/>
            </Style>
            <Style TargetType="Separator">
                <Setter Property="Opacity" Value="0.5"/>
            </Style>
            <Style TargetType="TextBlock">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>
            <Style TargetType="TextBox">
                <Setter Property="Padding" Value="3"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0.5"/>
            </Style>
            <Style TargetType="CheckBox">
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Foreground" Value="{Binding Path=(helpers:ThemeHelper.Foreground)}"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    
    <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                  VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <StackPanel.DataContext>
                <p:ParagraphsViewModel/>
            </StackPanel.DataContext>
            
            <TextBlock Text="עיצוב פסקה"
                       Margin="5"/>
            <Separator/>
            <StackPanel Orientation="Horizontal">
                <Button x:Name="FirstWordStyle"
         ToolTip="סגנון מילה ראשונה"
         Command="{Binding ApplyFirstWordStyleCommand}">
                    <Path Data="M3 3H5V5H3V3M6 3H8V5H6V3M9 3H11V5H9V3M13 3H21V5H13V3M3 7H21V9H3V7M3 11H21V13H3V11M3 15H21V17H3V15M3 19H21V21H3V19"
           FlowDirection="RightToLeft"/>
                </Button>
                <Button x:Name="FirstWordHanging"
                        ToolTip="עיצוב חלון"
                        Command="{Binding ApplyFirstWordHangingCommand}">
                    <Path Data="M3 3H21V5H3V3M3 7H17V9H3V7M3 11H21V13H3V11M3 15H21V17H3V15M9 19H21V21H3V19Z"/>
                </Button>
                <Button x:Name="DoubleFirstWordHanging"
                        ToolTip="עיצוב חלון כפול"
                        Command="{Binding ApplyDoubleFirstWordHangingCommand}">
                    <Path Data="M3 3H21V5H3V3M3 7H17V9H3V7M3 11H17V13H3V11M3 15H21V17H3V15M9 19H21V21H3V19Z"/>
                </Button>
                <Button x:Name="CenterLastLine"
                        ToolTip="מירכוז שורה אחרונה"
                        Command="{Binding ApplyCenterLastLineCommand}">
                    <Path Data="M3 3H21V5H3V3M3 7H21V9H3V7M3 11H21V13H3V11M3 15H21V17H3V15M9 19H17V21H7V19Z"/>
                </Button>
                <Button x:Name="RemoveFirstWordStyle"
                     ToolTip="הסר סגנון מילה ראשונה"
                     Command="{Binding RemoveFirstWordStyleCommand}">
                    <Grid>
                        <Path  Opacity="0.5" FlowDirection="RightToLeft" 
               Data="M3 3H5V5H3V3M6 3H8V5H6V3M9 3H11V5H9V3M13 3H21V5H13V3M3 7H21V9H3V7M3 11H21V13H3V11M3 15H13V17H3V15M3 19H13V21H3V19"/>
                        <Path Style="{StaticResource DeleteIconStyle}"/>
                    </Grid>
                </Button>
                <Button x:Name="RemoveFirstWordHanging"
                         ToolTip="הסר עיצוב חלון"
                         Command="{Binding RemoveFirstWordHangingCommand}">
                    <Grid>
                        <Path Opacity="0.5" Data="M3 3H21V5H3V3M3 7H17V9H3V7M3 11H21V13H3V11M11 15H21V17H11V15M11 19H21V21H11V19Z"/>
                        <Path Style="{StaticResource DeleteIconStyle}"/>
                    </Grid>
                </Button>
                <Button x:Name="RemoveCenterLastLine"
                     ToolTip="הסר מירכוז שורה אחרונה"
                     Command="{Binding RemoveCenterLastLineCommand}">
                    <Grid>
                        <Path Opacity="0.5" Data="M3 3H21V5H3V3M3 7H21V9H3V7M3 11H21V13H3V11M11 15H21V17H11V15M11 19H17V21H11V19Z"/>
                        <Path Style="{StaticResource DeleteIconStyle}"/>
                    </Grid>
                </Button>
            </StackPanel>

            <TextBlock Text="הגדרות עיצוב פסקה"/>
            <Separator/>
            
            <ToggleButton x:Name="ChooseStylesToggle"
                          Content="החל עיצובים על ⏷"
                          Padding="5"
                          HorizontalAlignment="Left"
                          IsHitTestVisible="{Binding IsOpen, ElementName=ChooseStylesPopup, Converter={StaticResource ReverseBoolConverter}}"
                          IsChecked="{Binding RefreshStyles}"/>
            <Popup x:Name="ChooseStylesPopup"
                   PlacementTarget="{Binding ElementName=ChooseStylesToggle}"
                   AllowsTransparency="True" StaysOpen="False"
                   IsOpen="{Binding IsChecked, ElementName=ChooseStylesToggle}">
                <Border Background="{Binding Path=(helpers:ThemeHelper.Background)}"
                        BorderBrush="{StaticResource Generic.Clicked}"
                        BorderThickness="0.5">
                    <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                  VerticalScrollBarVisibility="Auto">
                        <StackPanel >
                            <CheckBox Content="סמן הכל" IsChecked="{Binding CheckAllStyles}"/>
                            <ItemsControl ItemsSource="{Binding ActiveStyles}"
                                MaxHeight="240">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <CheckBox Content="{Binding Name}" IsChecked="{Binding Apply}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Popup>

            <StackPanel Orientation="Horizontal">
                <TextBlock Text="מינימום שורות"/>
                <controls:UpDownTextBox 
                    Value="{Binding MinLineCount}"
                    Width="37"
                    Padding="3" Margin="0,5"
                    Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    Background="Transparent" BorderBrush="{StaticResource Generic.Clicked}"
                    BorderThickness="0.5"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"/>
            </StackPanel>

            <StackPanel Orientation="Horizontal"
                        ToolTip="בחר סגנון עבור מילה ראשונה (סגנון תו בלבד)">
                <TextBlock Text="סגנון מילה ראשונה"/>
                <ComboBox x:Name="FirstWordStyleCombo"
                          ItemsSource="{Binding FirstWordStyle.Styles}"
                          Text="{Binding FirstWordStyle.SelectedStyle}"
                          Margin="5"
                          MinWidth="100"
                          IsEditable="True"
                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                </ComboBox>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
    
</UserControl>
